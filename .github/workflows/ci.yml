name: ci
on: push

jobs:
  spec:
    runs-on: ubuntu-latest
    name: spec ci
    steps:
      # this step makes your repo available to the next one
      - uses: actions/checkout@v2
      - uses: actions/setup-python@v2
        with:
          python-version: 3.8
      - run: cd spec/setup/ && bash setup.sh && cd ../..
      - run: pip install git+https://github.com/ploomber/ci-for-ds && cd spec/ && ploomberci --clean-products-path

  basic-tutorial:
    runs-on: ubuntu-latest
    name: basic-tutorial ci
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-python@v2
        with:
          python-version: 3.8
      - run: pip install git+https://github.com/ploomber/ci-for-ds && cd basic-tutorial/ && ploomberci build --clean-products-path

  spec-r:
    runs-on: ubuntu-latest
    name: spec-r
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-python@v2
        with:
          python-version: 3.8
      - run: pip install git+https://github.com/ploomber/ci-for-ds && cd spec-r/ && ploomberci build --clean-products-path
  
  co2-emissions:
    runs-on: ubuntu-latest
    name: co2-emissions
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-python@v2
        with:
          python-version: 3.8
      - run: pip install git+https://github.com/ploomber/ci-for-ds && cd contrib/co2-emissions && ploomberci build --clean-products-path